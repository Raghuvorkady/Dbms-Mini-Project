{% extends 'libraryApp/main.html' %}
{% load static %}

{% block content %}

<nav class="navbar">
  <div class="navbar-nav mySubMenu ml-auto">
    <nav>
      <a class="text-muted" href="{% url 'dashboard' %}">Dashboard</a>
      <a href="{% url 'borrowbook' %}">Borrow book</a>
      <a href="{% url 'manage' %}">Manage</a>
      <a href="{% url 'returnbook' %}">Return book</a>
    </nav>
  </div>
  <form class="form-inline" method="POST">
    {% csrf_token %}
    <div class="input-group">
      <div id="speech" class="btn btn-light" title="Click the mic to speak">
        <i class="fa fa-microphone" aria-hidden="true"></i>
        <div class="pulse-ring" id="pulseRing"></div>
      </div>
      {{myFilter.form}}
      <div class="input-group-append">
        <button id="searchButton" class="btn btn-outline-success" type="submit">
          <i class="fa fa-search"></i>
        </button>
      </div>
    </div>
  </form>
</nav>


<br>

<div class="row">
  <div class="col-md-6 cardMargin">
    <h2 class="text-center">Borrowed Books</h2>
    <div class="col-md-12 mt-3">
      <h6 class="form-text text-center text-muted">
        Till date you have borrowed {{bCount}} no. of books
      </h6>
    </div>

    <div class="card card-body mt-4">
      <table class="table table-sm table-hover text-center">

        <thead class="thead-light threadText">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Book Title</th>
            <th scope="col">User</th>
            <th scope="col">CheckOut</th>
            <th scope="col">DueDate</th>
          </tr>
        </thead>

        {% for i in borrowedBooks %}
        <tr>
          <td>{{forloop.counter}}</td>
          <td><a href="{% url 'viewbook' i.bookID %}">{{i.bookTitle}}</a></td>
          <td>{{i.userName}}</td>
          <td>{{i.checkOut}}</td>
          <td>{{i.dueDate}}</td>
        </tr>
        {% endfor %}
      </table>
    </div>
  </div>

  <br>

  <div class="col-md-6 cardMargin">
    <h2 class="text-center">Returned Books</h2>
    <div class="col-md-12 mt-3">
      <h6 class="form-text text-center text-muted">
        Till date you have returned {{rCount}} no. of books
      </h6>
    </div>
    <div class="card card-body mt-4">
      <table class="table table-sm table-hover text-center">

        <thead class="thead-light threadText text-center">
          <tr>
            <th scope="col">#</th>
            <th scope="col">Book Title</th>
            <th scope="col">User</th>
            <th scope="col">CheckOut</th>
            <th scope="col">CheckIn</th>
          </tr>
        </thead>

        {% for i in returnedBooks %}
        <tr>
          <td>{{forloop.counter}}</td>
          <td><a href="{% url 'viewbook' i.bookID %}">{{i.bookTitle}}</a></td>
          <td>{{i.userName}}</td>
          <td>{{i.checkOut}}</td>
          <td>{{i.checkIn}}</td>
        </tr>
        {% endfor %}

      </table>
    </div>
  </div>

</div>
{% endblock %}